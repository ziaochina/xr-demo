{"version":3,"sources":["webpack:///./apps/xr-template-portal/component.js","webpack:///./apps/xr-template-portal/action.js","webpack:///./apps/xr-template-portal/reducer.js"],"names":["C","props","monkeyKing","path","creator","action","option","onInit","component","injections","reduce","getMenuChildren","menu","metaAction","gf","toJS","loop","children","ret","forEach","child","push","key","name","handleMenuClick","e","find","o","hit","app","config","metaHandlers","reducer","init","state","data","menuDefaultSelectedKeys","menuDefaultOpenKeys","content","appName","appParams","metaReducer","setContent","appProps","sf"],"mappings":"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","file":"xr-template-portal.e41bc9f0.chunk.js","sourcesContent":["import React, { Component } from 'react'\n\nimport { wrapper } from 'xr-meta-engine'\n\nimport appInfo from './index'\n\n@wrapper(appInfo)\nexport default class C extends Component {\n\trender() {\n\t\treturn  this.props.monkeyKing({...this.props, path:'root'})\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./apps/xr-template-portal/component.js","import React from 'react'\nimport {Menu} from 'xr-component'\nimport { action as MetaAction, AppLoader } from 'xr-meta-engine'\nimport config from './config'\n\nclass action {\n    constructor(option) {\n        this.metaAction = option.metaAction\n    }\n\n    onInit = ({ component, injections }) => {\n        this.component = component\n        this.injections = injections\n        injections.reduce('init')\n    }\n\n\n    getMenuChildren = () => {\n        const menu = this.metaAction.gf('data.menu').toJS()\n        const loop = (children) => {\n            const ret = []\n            children.forEach(child=>{\n\n                if(!child.children){\n                    ret.push(<Menu.Item key={child.key}>{child.name}</Menu.Item>)\n                }\n                else{\n                    ret.push(<Menu.SubMenu key={child.key} title={child.name}>{loop(child.children)}</Menu.SubMenu>)\n                }\n            })\n            return ret\n        }\n        return loop(menu)\n    }\n\n    handleMenuClick = (e) =>{\n\n        const menu = this.metaAction.gf('data.menu').toJS()\n        const find = (children) =>{\n            for(let child of children){\n                if(child.key == e.key){\n                    return child\n                }\n\n                if(child.children){\n                    let o = find(child.children)\n                    if(o) return o\n                }\n            }\n        }\n        \n        const hit = find(menu)\n        if(hit){\n            this.injections.reduce('setContent', hit.app, {})\n        }\n    }\n}\n\nexport default function creator(option) {\n    const metaAction = new MetaAction(option),\n        o = new action({ ...option, metaAction }),\n        ret = { ...metaAction, ...o }\n\n    metaAction.config({ metaHandlers: ret })\n\n    return ret\n}\n\n\n// WEBPACK FOOTER //\n// ./apps/xr-template-portal/action.js","import { Map } from 'immutable'\nimport { reducer as MetaReducer } from 'xr-meta-engine'\nimport config from './config'\n\nclass reducer {\n    constructor(option) {\n        this.metaReducer = option.metaReducer\n    }\n\n    init = (state, option) => {\n        const data = { data: {\n            menu:[{\n                key:'1',\n                name:'about',\n                app:'xr-template-portal-about'\n            },{\n                key:'2',\n                name:'apps',\n                children:[{\n                    key:'201',\n                    name:'app1',\n                    app:'xr-template-portal-app1'\n                },{\n                    key:'202',\n                    name:'app2',\n                    app:'xr-template-portal-app2'\n                }]\n            }],\n            menuDefaultSelectedKeys:['1'],\n            menuDefaultOpenKeys:['2'],\n            content:{\n                appName: 'xr-template-portal-about',\n                appParams:{}\n            }\n        } }\n        return this.metaReducer.init(state, data)\n    }\n\n    setContent = (state, appName, appProps) =>{\n        state = this.metaReducer.sf(state, 'data.content.appName', appName)\n        state = this.metaReducer.sf(state, 'data.content.appParams', appProps)\n        return state\n    }\n}\n\nexport default function creator(option) {\n    const metaReducer = new MetaReducer(option),\n        o = new reducer({ ...option, metaReducer })\n\n    return { ...metaReducer, ...o }\n}\n\n\n// WEBPACK FOOTER //\n// ./apps/xr-template-portal/reducer.js"],"sourceRoot":""}